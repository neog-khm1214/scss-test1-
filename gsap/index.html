<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://assets.codepen.io/16327/ScrollSmoother.min.js?v=94387867"></script>
    <link href="../../css/common.css" rel="stylesheet">
    <link href="../../css/gsap.css" rel="stylesheet">
</head>

<body>
    <div class="wrap">
        <aside class="bn">
            <img src="https://preview.gettyimagesbank.com/125/2019/07/66/077/jv11666077.jpg?s=1024" alt="">
        </aside>
        <p class="text">test text <br>다운로드, 북마크, 읽기 목록 항목은 계속해서 저장됩니다</p>
        <!-- <div class="box box1"><img src="https://imagescdn.gettyimagesbank.com/500/202403/jv13285788.jpg" alt=""></div>
        <div class="box box2"><img src="https://imagescdn.gettyimagesbank.com/500/202403/jv13350682.jpg" alt=""></div>
        <div class="box box3"><img src="https://imagescdn.gettyimagesbank.com/500/202202/jv12534960.jpg" alt=""></div> -->
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</body>

<script>
    $(function () {
        gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

        //scroll reset
        ScrollTrigger.defaults({
            toggleActions: "play none reverse",
        });

        let smoother = ScrollSmoother.create({
            smooth: 3, // 부드러운 스크롤링
            // speed: .1,  // 스크롤 속도
            effects: true,
            normalizeScroll: true, //뷰포트크기조절방지
            //모바일용 터치 스무스 설정
            smoothTouch: true,
            smoothsmoothTouch: 0.1
        });

        ScrollTrigger.refresh();

        //스크롤 배경색 변경
        gsap.fromTo("body",
            { backgroundColor: "#ffffff" },
            {
                backgroundColor: "#333333",
                scrollTrigger: {
                    trigger: "body",
                    start: "center center",
                    end: "center center",
                    markers: false,
                },
            }
        );
        gsap.to('.bn', { //움직일 대상
            scrollTrigger: {
                trigger: '.bn',
                start: "30% center", //트리거/뷰포트 
                end: "50% center",
                scrub: .1, // 스크롤뒤집기애니메이션 / true/false/숫자
                markers: true,
            },
            ease: "none",
            transform: "scale(1)"
        });
        gsap.fromTo(".text",
            { color: "#798eb0" },
            {
                color: "#ffffff",
                scrollTrigger: {
                    trigger: ".text",
                    start: "top top",
                    end: "top top",
                    markers: false,
                },
            }
        );

        //let targets = document.querySelectorAll(".box");
        const targets = gsap.utils.toArray('.box');
        targets.forEach(function (item) {
            gsap.to(item, { //움직일 대상
                scrollTrigger: {
                    trigger: item,
                    start: "0 center",
                    end: "50% center",
                    scrub: .1,
                    markers: true,
                },
                ease: "none",
                width: "50%",
                margin: 0,
                toggleClass: "active"
            });
        });

    }());

</script>

</html>